"use strict";var e=require("postcss"),t=require("purgecss");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=s(e),r=s(t);const n=o.default.plugin("postcss-plugin-purgecss",(function(e){return async function(s,o){const n=new r.default,c={...t.defaultOptions,...e,safelist:t.standardizeSafelist(null==e?void 0:e.safelist)};e&&"function"==typeof e.contentFunction&&(c.content=e.contentFunction(s.source&&s.source.input.file||"")),n.options=c;const{content:i,extractors:a}=c,u=i.filter(e=>"string"==typeof e),l=i.filter(e=>"object"==typeof e),p=await n.extractSelectorsFromFiles(u,a),f=await n.extractSelectorsFromString(l,a),d=t.mergeExtractorSelectors(p,f);n.walkThroughCSS(s,d),n.options.fontFace&&n.removeUnusedFontFaces(),n.options.keyframes&&n.removeUnusedKeyframes(),n.options.variables&&n.removeUnusedCSSVariables(),n.options.rejected&&n.selectorsRemoved.size>0&&(o.messages.push({type:"purgecss",plugin:"postcss-purgecss",text:`purging ${n.selectorsRemoved.size} selectors:\n        ${Array.from(n.selectorsRemoved).map(e=>e.trim()).join("\n  ")}`}),n.selectorsRemoved.clear())}}));module.exports=n;
